<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Edit Site</title>
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Titillium+Web:300,400,600" rel="stylesheet">
	<link href="<?php echo $this->baseUrl(); ?>/ui_user_site_editor/css/style.css" rel="stylesheet">

	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
	<?php if(isset($this->addOnCss) && $this->addOnCss)  echo $this->addOnCss; ?>
<style>
	.smartphone-frame {
		padding: 10px 1% 55px 1%;
		border-radius: 30px;
		border: .5px solid #E0E0E0;
		background-color: #FFF;
		box-shadow: inset 0px 0px 0px -4px rgba(255,255,255,0.1),1px 1px 6px rgba(0,0,0,0.05),1px 1px 8px rgba(0,0,0,0.07);
		display:block;
		margin:0 auto;
		overflow: hidden;
		transition: all .5s linear;
	}
	.frame_container {
		margin-top:30px;
		margin-bottom: 50px;
		width: 100%;
		-webkit-transition: width .5s, height .5s; /* Safari */
	  transition: width .5s, height .5s;
		transition-timing-function: cubic-bezier(0.47, 0, 0.05, 0.89);
	}
	.rotate_button {
		display: block;
		margin: 0 auto;
		width: 38px;
		cursor: pointer;
		border: 1px solid #2d2d2d;
		border-radius: 23px;
		padding: 3px;
	}
	.rotate_button:hover {
		background-color: #DFDFDF;
	}
	.bodyScrollLock {
		overflow: hidden;
	}
	.mobile_top_strip {
		display: block;
		margin: 2px auto;
		width: 45px;
	}
</style>
</head>
<body class="bodyScrollLock" >
	<header class="cms-header">
		<div class="container-fluid">
			<div class="row">
				<div class="col-xs-4 col-sm-3 col-md-3 col-lg-2">
					<a href="" class="brand-logo">
						<img src="<?php echo $this->baseUrl() ?>/ui_user_site_editor/images/logo.png" alt="CMS logo">
					</a>
				</div>
				<div class="hidden-xs col-sm-3 col-md-3 col-lg-4 responsive-check">
					<ul>
						<li class="visible-lg">
							<a href="#" class="change_viewport" id="change_viewport-phone_portrait"><img src="<?php echo $this->baseUrl() ?>/ui_user_site_editor/images/responsive-check/mobile-phone.png" alt="mobile-phone"></a>
						</li>
						<li class="visible-lg">
							<a href="#" class="change_viewport" id="change_viewport-tablet_portrait"><img src="<?php echo $this->baseUrl() ?>/ui_user_site_editor/images/responsive-check/tablet.png" alt="tablet"></a>
						</li>
						<li class="visible-lg active">
							<a href="#" class="change_viewport" id="change_viewport-desktop"><img src="<?php echo $this->baseUrl() ?>/ui_user_site_editor/images/responsive-check/desktop.png" alt="desktop"></a>
						</li>
						<!-- <li class="hidden-lg">
							<a href="#"><img src="images/responsive-check/desktop.png" alt="desktop"></a>
						</li> -->
						<li class="hidden-lg dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
								<img src="<?php echo $this->baseUrl() ?>/ui_user_site_editor/images/responsive-check/desktop.png" alt="desktop"> <span class="caret"></span>
							</a>
							<ul class="dropdown-menu">
								<li class="">
									<a href="#"><img src="<?php echo $this->baseUrl() ?>/ui_user_site_editor/images/responsive-check/mobile-phone.png" alt="mobile-phone"></a>
								</li>
								<li class="">
									<a href="#"><img src="<?php echo $this->baseUrl() ?>/ui_user_site_editor/images/responsive-check/tablet.png" alt="tablet"></a>
								</li>
								<li class="active">
									<a href="#"><img src="<?php echo $this->baseUrl() ?>/ui_user_site_editor/images/responsive-check/desktop.png" alt="desktop"></a>
								</li>
							</ul>
						</li>
					</ul>
				</div>
				<div class="col-xs-4 col-sm-3 col-md-3 col-lg-4 page-actions">
					<button class="btn btn-publish" type="button" name="button">
						<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" version="1.1">
							<g>
								<path style="fill:#fff" d="M 5 2 C 3.355469 2 2 3.355469 2 5 L 2 45 C 2 46.644531 3.355469 48 5 48 L 45 48 C 46.644531 48 48 46.644531 48 45 L 48 12 C 48.007813 11.734375 47.90625 11.472656 47.71875 11.28125 L 38.71875 2.28125 C 38.527344 2.09375 38.265625 1.992188 38 2 Z M 5 4 L 10 4 L 10 19 C 10 20.09375 10.90625 21 12 21 L 35 21 C 36.09375 21 37 20.09375 37 19 L 37 4 L 37.5625 4 L 46 12.4375 L 46 45 C 46 45.566406 45.566406 46 45 46 L 40 46 L 40 28.8125 C 40 27.277344 38.722656 26 37.1875 26 L 12.8125 26 C 11.277344 26 10 27.277344 10 28.8125 L 10 46 L 5 46 C 4.433594 46 4 45.566406 4 45 L 4 5 C 4 4.433594 4.433594 4 5 4 Z M 12 4 L 35 4 L 35 19 L 12 19 Z M 28.8125 6 C 28.335938 6.089844 27.992188 6.511719 28 7 L 28 16 C 28 16.550781 28.449219 17 29 17 L 32 17 C 32.550781 17 33 16.550781 33 16 L 33 7 C 33 6.449219 32.550781 6 32 6 L 29 6 C 28.96875 6 28.9375 6 28.90625 6 C 28.875 6 28.84375 6 28.8125 6 Z M 30 8 L 31 8 L 31 15 L 30 15 Z M 12.8125 28 L 37.1875 28 C 37.632813 28 38 28.367188 38 28.8125 L 38 46 L 12 46 L 12 28.8125 C 12 28.367188 12.367188 28 12.8125 28 Z M 6 41 L 6 43 L 8 43 L 8 41 Z M 42 41 L 42 43 L 44 43 L 44 41 Z "></path>
							</g>
						</svg>
						<h5>Publish</h5>
					</button>
					<button class="btn btn-preview" type="button" name="button">
						<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" version="1.1">
							<g>
								<path style="fill:#000" d="M 25 12 C 11.667969 12 1.25 24.34375 1.25 24.34375 C 0.921875 24.71875 0.921875 25.28125 1.25 25.65625 C 1.25 25.65625 11.667969 38 25 38 C 38.332031 38 48.75 25.65625 48.75 25.65625 C 49.078125 25.28125 49.078125 24.71875 48.75 24.34375 C 48.75 24.34375 38.332031 12 25 12 Z M 25 14 C 27.628906 14 30.140625 14.542969 32.46875 15.375 C 34.03125 17.140625 35 19.449219 35 22 C 35 27.535156 30.535156 32 25 32 C 19.464844 32 15 27.535156 15 22 C 15 19.449219 15.9375 17.140625 17.5 15.375 C 19.835938 14.539063 22.363281 14 25 14 Z M 14.1875 16.84375 C 13.4375 18.40625 13 20.15625 13 22 C 13 28.617188 18.382813 34 25 34 C 31.617188 34 37 28.617188 37 22 C 37 20.164063 36.582031 18.40625 35.84375 16.84375 C 41.492188 19.714844 45.554688 23.878906 46.59375 25 C 44.96875 26.757813 35.972656 36 25 36 C 14.027344 36 5.03125 26.757813 3.40625 25 C 4.445313 23.875 8.527344 19.714844 14.1875 16.84375 Z M 25 17 C 22.238281 17 20 19.238281 20 22 C 20 24.761719 22.238281 27 25 27 C 27.761719 27 30 24.761719 30 22 C 30 19.238281 27.761719 17 25 17 Z "></path>
							</g>
						</svg>
						<h5>Preview</h5>
					</button>
				</div>
				<div class="col-xs-4 col-sm-3 col-md-3 col-lg-2 user-actions">
					<ul class="nav navbar-nav navbar-right">
						<li class="active">
							<a href="#"><img src="<?php echo $this->baseUrl() ?>/ui_user_site_editor/images/user-actions/help.png" alt="user help"></a>
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
								<img src="<?php echo $this->baseUrl() ?>/ui_user_site_editor/images/user-actions/user.png" alt="user help"> <span class="caret"></span>
							</a>
							<ul class="dropdown-menu">
								<li><a href="#">Action</a></li>
								<li><a href="#">Another action</a></li>
								<li><a href="#">Something else here</a></li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</header>
	<?php if(isset($this->message) && $this->message) echo '<div class="row"><div class="col col-md-12">'.$this->message.'</div></div>'; ?>

	<?php if(isset($this->showSite) && $this->showSite && isset($this->site) && $this->site) : ?>
	<div id="frame_container" class="frame_container" >
		<div class="mobile_top_strip" style="display:none;"><img width="75" src="<?php echo $this->baseUrl(); ?>/ui_user_site_editor/images/mobile_cam.png" alt=""></div>
		<iframe frameborder="0"  id="siteFrame" name="siteFrame" src="<?php echo $this->baseUrl(); ?>/user/edit-site/show-site?name=<?php echo $this->site['site_slug']; ?>&page=<?php echo $this->page['page_slug'];  ?>" style="width:100%;" height="500" ></iframe>
		<div class="rotate_button change_viewport" style="display:none;"><img width="30" src="<?php echo $this->baseUrl(); ?>/ui_user_site_editor/images/screen-rotation-button.png" alt="Rotate Screen"></div>
	</div>
	<?php endif; ?>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script>
	 $('#siteFrame').load(function(){
		  setFrameHeight();
			var iframe = $('#siteFrame').contents();
			iframe.find(".btn_change_image").click(function(){
						 $('body').removeClass('bodyScrollLock');
			});

		});
		$(document).on('click','.change_viewport',function(){
			var targetViewport = $(this).attr('id').split('-')[1];
			if(targetViewport == 'phone_portrait') {
				$('body').removeClass('bodyScrollLock');
				$('.mobile_top_strip').show();
				$('.rotate_button').show(); $('.rotate_button').attr('id', 'rotate-phone_landscape');
				$('#frame_container').addClass('smartphone-frame');
				document.getElementById("frame_container").style.width = "340px";
				document.getElementById("frame_container").style.height = "540px";
				var iFrame = document.getElementById('siteFrame');
				iFrame.style = 'width:100%;height:460px; border:1px solid #2d2d2d;';
				$('.change_viewport').parent().removeClass('active');
				$('#change_viewport-phone_portrait').parent().addClass('active');
			} else if(targetViewport == 'tablet_portrait') {
				$('body').removeClass('bodyScrollLock');
				$('.mobile_top_strip').show();
				$('.rotate_button').show(); $('.rotate_button').attr('id', 'rotate-tablet_landscape');
				$('#frame_container').removeClass('smartphone-frame');
				$('#frame_container').addClass('smartphone-frame');
				document.getElementById("frame_container").style.height = "840px";
				document.getElementById("frame_container").style.width = "680px";
				var iFrame = document.getElementById('siteFrame');
				iFrame.style = 'width:100%;height:760px;border:1px solid #2d2d2d;';
				$('.change_viewport').parent().removeClass('active');
				$('#change_viewport-tablet_portrait').parent().addClass('active');
			} if(targetViewport == 'phone_landscape') {
				$('body').removeClass('bodyScrollLock');
				$('.mobile_top_strip').show();
				$('.rotate_button').show(); $('.rotate_button').attr('id', 'rotate-phone_portrait');
				$('#frame_container').addClass('smartphone-frame');
				document.getElementById("frame_container").style.height = "340px";
				document.getElementById("frame_container").style.width = "600px";
				var iFrame = document.getElementById('siteFrame');
				iFrame.style = 'width:100%;height:260px; border:1px solid #2d2d2d;';

			} if(targetViewport == 'tablet_landscape') {
				$('body').removeClass('bodyScrollLock');
				$('.mobile_top_strip').show();
				$('.rotate_button').show(); $('.rotate_button').attr('id', 'rotate-tablet_portrait');
				$('#frame_container').addClass('smartphone-frame');
				document.getElementById("frame_container").style.width = "920px";
				document.getElementById("frame_container").style.height = "600px";
				var iFrame = document.getElementById('siteFrame');
				iFrame.style = 'width:100%;height:520px;border:1px solid #2d2d2d;';

			} else if(targetViewport == 'desktop') {
				$('body').addClass('bodyScrollLock');
				$('.mobile_top_strip').hide();
				$('.rotate_button').hide();
				$('#frame_container').removeClass('smartphone-frame');
				var windowHeight = window.innerHeight;
				document.getElementById("frame_container").style.width = "100%";
				document.getElementById("frame_container").style.height = windowHeight+"px";
				var iFrame = document.getElementById('siteFrame');
				iFrame.style = 'width:100%;height:'+windowHeight+'px;';
				$('.change_viewport').parent().removeClass('active');
				$(this).parent().addClass('active');
			}

		})

		function setFrameHeight() {
			var windowHeight = window.innerHeight;
			var iFrame = document.getElementById('siteFrame');
			iFrame.style.height = (windowHeight-100) + 'px';
		}
	</script>
	<?php if(isset($this->addOnJs) && $this->addOnJs)  echo $this->addOnJs; ?>

</body>
</html>
